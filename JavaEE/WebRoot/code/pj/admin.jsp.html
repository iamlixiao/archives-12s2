<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="Generator" content="Kate, the KDE Advanced Text Editor" />
<title>admin.jsp</title>
</head>
<body>
<pre style='color:#1f1c1b;background-color:#ffffff;'>
<b><i><span style='color:#0000ff;'>&lt;%@ page</span></i></b><span style='color:#006e28;'> language</span>=<span style='color:#bf0303;'>&quot;java&quot;</span><span style='color:#006e28;'> import</span>=<span style='color:#bf0303;'>&quot;java.util.*&quot;</span><span style='color:#006e28;'> pageEncoding</span>=<span style='color:#bf0303;'>&quot;GBK&quot;</span><b><i><span style='color:#0000ff;'>%&gt;</span></i></b>
<b><i><span style='color:#0000ff;'>&lt;%@page</span></i></b><span style='color:#006e28;'> import</span>=<span style='color:#bf0303;'>&quot;java.sql.*&quot;</span><b><i><span style='color:#0000ff;'>%&gt;</span></i></b>
<b><i><span style='color:#0000ff;'>&lt;jsp:useBean</span></i></b><span style='color:#006e28;'> id</span>=<span style='color:#bf0303;'>&quot;acc&quot;</span><span style='color:#006e28;'> class</span>=<span style='color:#bf0303;'>&quot;pj.Account&quot;</span><span style='color:#006e28;'> scope</span>=<span style='color:#bf0303;'>&quot;session&quot;</span><b><i><span style='color:#0000ff;'>&gt;&lt;/jsp:useBean&gt;</span></i></b>
<b><span style='color:#000000;'>&lt;%</span></b>
	<b><span style='color:#0095ff;'>String</span></b> path = request.getContextPath();
	<b><span style='color:#0095ff;'>String</span></b> basePath = request.getScheme() + <span style='color:#bf0303;'>&quot;://&quot;</span>
			+ request.getServerName() + <span style='color:#bf0303;'>&quot;:&quot;</span> + request.getServerPort()
			+ path + <span style='color:#bf0303;'>&quot;/&quot;</span>;
	request.setCharacterEncoding(<span style='color:#bf0303;'>&quot;GBK&quot;</span>);
	<b>if</b> (acc
			.isAdmin(request.getSession().getAttribute(<span style='color:#bf0303;'>&quot;logged&quot;</span>) == <b>null</b> ? -<span style='color:#b08000;'>1</span>
					: (<b><span style='color:#0095ff;'>Integer</span></b>) request.getSession().getAttribute(
							<span style='color:#bf0303;'>&quot;logged&quot;</span>))) {
<b><span style='color:#000000;'>%&gt;</span></b>

&lt;<span style='color:#006e28;'>!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span>&gt;
&lt;html&gt;
	&lt;head&gt;
		&lt;base<span style='color:#006e28;'> href</span>=<span style='color:#0057ae;'>&quot;</span><b><span style='color:#000000;'>&lt;%=</span></b>basePath<b><span style='color:#000000;'>%&gt;</span></b><span style='color:#0057ae;'>&quot;</span>&gt;

		&lt;title&gt;管理页&lt;/title&gt;

		&lt;meta<span style='color:#006e28;'> http-equiv</span>=<span style='color:#0057ae;'>&quot;pragma&quot;</span><span style='color:#006e28;'> content</span>=<span style='color:#0057ae;'>&quot;no-cache&quot;</span>&gt;
		&lt;meta<span style='color:#006e28;'> http-equiv</span>=<span style='color:#0057ae;'>&quot;cache-control&quot;</span><span style='color:#006e28;'> content</span>=<span style='color:#0057ae;'>&quot;no-cache&quot;</span>&gt;
		&lt;meta<span style='color:#006e28;'> http-equiv</span>=<span style='color:#0057ae;'>&quot;expires&quot;</span><span style='color:#006e28;'> content</span>=<span style='color:#0057ae;'>&quot;0&quot;</span>&gt;
		&lt;meta<span style='color:#006e28;'> http-equiv</span>=<span style='color:#0057ae;'>&quot;keywords&quot;</span><span style='color:#006e28;'> content</span>=<span style='color:#0057ae;'>&quot;keyword1,keyword2,keyword3&quot;</span>&gt;
		&lt;meta<span style='color:#006e28;'> http-equiv</span>=<span style='color:#0057ae;'>&quot;description&quot;</span><span style='color:#006e28;'> content</span>=<span style='color:#0057ae;'>&quot;This is my page&quot;</span>&gt;
		&lt;link<span style='color:#006e28;'> rel</span>=<span style='color:#0057ae;'>&quot;stylesheet&quot;</span><span style='color:#006e28;'> type</span>=<span style='color:#0057ae;'>&quot;text/css&quot;</span><span style='color:#006e28;'> href</span>=<span style='color:#0057ae;'>&quot;pj/x.css&quot;</span>&gt;

	&lt;/head&gt;

	&lt;body&gt;
		<b><i><span style='color:#0000ff;'>&lt;jsp:include</span></i></b><span style='color:#006e28;'> page</span>=<span style='color:#bf0303;'>&quot;topbar.jsp&quot;</span><b><i><span style='color:#0000ff;'>&gt;&lt;/jsp:include&gt;</span></i></b>
		<b><span style='color:#000000;'>&lt;%</span></b><b>if</b>(request.getParameter(<span style='color:#bf0303;'>&quot;aid&quot;</span>)==<b>null</b>){ <b><span style='color:#000000;'>%&gt;</span></b>
		&lt;div<span style='color:#006e28;'> style</span>=<span style='color:#0057ae;'>&quot;width: 70%; margin: auto&quot;</span>&gt;
			<b><span style='color:#000000;'>&lt;%</span></b>
				<span style='color:#0057ae;'>int</span> pages=<span style='color:#b08000;'>10</span>;
				<span style='color:#0057ae;'>int</span> rows=<span style='color:#b08000;'>0</span>;
				<span style='color:#0057ae;'>int</span> p = request.getParameter(<span style='color:#bf0303;'>&quot;n&quot;</span>) == <b>null</b> ? <span style='color:#b08000;'>0</span> : <b><span style='color:#0095ff;'>Integer</span></b>
							.parseInt(request.getParameter(<span style='color:#bf0303;'>&quot;n&quot;</span>));
					<b><span style='color:#0095ff;'>ResultSet</span></b> r = acc.getAccounts(p, pages);
					request.getSession().setAttribute(<span style='color:#bf0303;'>&quot;n&quot;</span>,<b><span style='color:#0095ff;'>String</span></b>.valueOf(p));
					<b>while</b> (r.next()) {
					++rows;
			<b><span style='color:#000000;'>%&gt;</span></b>
			&lt;form<span style='color:#006e28;'> action</span>=<span style='color:#0057ae;'>&quot;pj/admin.jsp&quot;</span><span style='color:#006e28;'> method</span>=<span style='color:#0057ae;'>&quot;post&quot;</span>
<span style='color:#006e28;'>				style</span>=<span style='color:#0057ae;'>&quot;margin: 10px; border: 1px solid black; background-image: -moz-linear-gradient(90deg, rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.1) ); border-radius: 10px&quot;</span>&gt;
				&lt;div&gt;
					&lt;input<span style='color:#006e28;'> style</span>=<span style='color:#0057ae;'>&quot;display:none&quot;</span><span style='color:#006e28;'> name</span>=<span style='color:#0057ae;'>&quot;aid&quot;</span><span style='color:#006e28;'> type</span>=<span style='color:#0057ae;'>&quot;text&quot;</span><span style='color:#006e28;'> value</span>=<span style='color:#0057ae;'>&quot;</span><b><span style='color:#000000;'>&lt;%=</span></b>r.getInt(<span style='color:#bf0303;'>&quot;aid&quot;</span>)<b><span style='color:#000000;'>%&gt;</span></b><span style='color:#0057ae;'>&quot;</span>/&gt;<b><span style='color:#000000;'>&lt;%=</span></b>r.getInt(<span style='color:#bf0303;'>&quot;aid&quot;</span>)<b><span style='color:#000000;'>%&gt;</span></b>::
					&lt;input<span style='color:#006e28;'> name</span>=<span style='color:#0057ae;'>&quot;anick&quot;</span><span style='color:#006e28;'> type</span>=<span style='color:#0057ae;'>&quot;text&quot;</span><span style='color:#006e28;'> value</span>=<span style='color:#0057ae;'>&quot;</span><b><span style='color:#000000;'>&lt;%=</span></b>r.getString(<span style='color:#bf0303;'>&quot;anick&quot;</span>)<b><span style='color:#000000;'>%&gt;</span></b><span style='color:#0057ae;'>&quot;</span><span style='color:#006e28;'> </span>/&gt;
					&lt;input<span style='color:#006e28;'> name</span>=<span style='color:#0057ae;'>&quot;pwd&quot;</span><span style='color:#006e28;'> type</span>=<span style='color:#0057ae;'>&quot;text&quot;</span><span style='color:#006e28;'> value</span>=<span style='color:#0057ae;'>&quot;</span><b><span style='color:#000000;'>&lt;%=</span></b>r.getString(<span style='color:#bf0303;'>&quot;pwd&quot;</span>)<b><span style='color:#000000;'>%&gt;</span></b><span style='color:#0057ae;'>&quot;</span><span style='color:#006e28;'> </span>/&gt;
				&lt;/div&gt;
				&lt;div&gt;
					邮箱：
					&lt;input<span style='color:#006e28;'> name</span>=<span style='color:#0057ae;'>&quot;email&quot;</span><span style='color:#006e28;'> type</span>=<span style='color:#0057ae;'>&quot;text&quot;</span><span style='color:#006e28;'> value</span>=<span style='color:#0057ae;'>&quot;</span><b><span style='color:#000000;'>&lt;%=</span></b>r.getString(<span style='color:#bf0303;'>&quot;email&quot;</span>)<b><span style='color:#000000;'>%&gt;</span></b><span style='color:#0057ae;'>&quot;</span><span style='color:#006e28;'> </span>/&gt;
					生日：
					&lt;input<span style='color:#006e28;'> name</span>=<span style='color:#0057ae;'>&quot;birthday&quot;</span><span style='color:#006e28;'> type</span>=<span style='color:#0057ae;'>&quot;text&quot;</span><span style='color:#006e28;'> value</span>=<span style='color:#0057ae;'>&quot;</span><b><span style='color:#000000;'>&lt;%=</span></b>r.getDate(<span style='color:#bf0303;'>&quot;birthday&quot;</span>)<b><span style='color:#000000;'>%&gt;</span></b><span style='color:#0057ae;'>&quot;</span><span style='color:#006e28;'> </span>/&gt;
					简介：
					&lt;input<span style='color:#006e28;'> name</span>=<span style='color:#0057ae;'>&quot;comment&quot;</span><span style='color:#006e28;'> type</span>=<span style='color:#0057ae;'>&quot;text&quot;</span><span style='color:#006e28;'> value</span>=<span style='color:#0057ae;'>&quot;</span><b><span style='color:#000000;'>&lt;%=</span></b>r.getString(<span style='color:#bf0303;'>&quot;comment&quot;</span>)<b><span style='color:#000000;'>%&gt;</span></b><span style='color:#0057ae;'>&quot;</span><span style='color:#006e28;'> </span>/&gt;
				&lt;/div&gt;
				&lt;div&gt;
					权限：
					&lt;input<span style='color:#006e28;'> name</span>=<span style='color:#0057ae;'>&quot;s1&quot;</span><span style='color:#006e28;'> type</span>=<span style='color:#0057ae;'>&quot;text&quot;</span><span style='color:#006e28;'> value</span>=<span style='color:#0057ae;'>&quot;</span><b><span style='color:#000000;'>&lt;%=</span></b>r.getInt(<span style='color:#bf0303;'>&quot;s1&quot;</span>)<b><span style='color:#000000;'>%&gt;</span></b><span style='color:#0057ae;'>&quot;</span><span style='color:#006e28;'> </span>/&gt;
					标题：
					&lt;input<span style='color:#006e28;'> name</span>=<span style='color:#0057ae;'>&quot;s2&quot;</span><span style='color:#006e28;'> type</span>=<span style='color:#0057ae;'>&quot;text&quot;</span><span style='color:#006e28;'> value</span>=<span style='color:#0057ae;'>&quot;</span><b><span style='color:#000000;'>&lt;%=</span></b>r.getString(<span style='color:#bf0303;'>&quot;s2&quot;</span>)<b><span style='color:#000000;'>%&gt;</span></b><span style='color:#0057ae;'>&quot;</span><span style='color:#006e28;'> </span>/&gt;
				&lt;/div&gt;
				&lt;input<span style='color:#006e28;'> type</span>=<span style='color:#0057ae;'>&quot;submit&quot;</span><span style='color:#006e28;'> value</span>=<span style='color:#0057ae;'>&quot;保存&quot;</span><span style='color:#006e28;'> </span>/&gt;
			&lt;/form&gt;
			<b><span style='color:#000000;'>&lt;%</span></b>
				}
			<b><span style='color:#000000;'>%&gt;</span></b>
		&lt;/div&gt;
		&lt;form<span style='color:#006e28;'> action</span>=<span style='color:#0057ae;'>&quot;pj/admin.jsp&quot;</span><span style='color:#006e28;'> method</span>=<span style='color:#0057ae;'>&quot;get&quot;</span>&gt;
			&lt;a<span style='color:#006e28;'> </span><b><span style='color:#000000;'>&lt;%</span></b><b>if</b>(p&gt;<span style='color:#b08000;'>0</span>){ <b><span style='color:#000000;'>%&gt;</span></b><span style='color:#006e28;'> href</span>=<span style='color:#0057ae;'>&quot;pj/admin.jsp?n=</span><b><span style='color:#000000;'>&lt;%=</span></b>p - <span style='color:#b08000;'>1</span><b><span style='color:#000000;'>%&gt;</span></b><span style='color:#0057ae;'>&quot;</span><span style='color:#006e28;'> </span><b><span style='color:#000000;'>&lt;%</span></b>} <b><span style='color:#000000;'>%&gt;</span></b>&gt;&amp;lt;&lt;/a&gt; 第
			&lt;input<span style='color:#006e28;'> type</span>=<span style='color:#0057ae;'>&quot;text&quot;</span><span style='color:#006e28;'> name</span>=<span style='color:#0057ae;'>&quot;n&quot;</span><span style='color:#006e28;'> value</span>=<span style='color:#0057ae;'>&quot;</span><b><span style='color:#000000;'>&lt;%=</span></b>p<b><span style='color:#000000;'>%&gt;</span></b><span style='color:#0057ae;'>&quot;</span><span style='color:#006e28;'> </span>/&gt;
			页
			&lt;input<span style='color:#006e28;'> type</span>=<span style='color:#0057ae;'>&quot;submit&quot;</span><span style='color:#006e28;'> value</span>=<span style='color:#0057ae;'>&quot;前往&quot;</span><span style='color:#006e28;'> </span>/&gt;
			&lt;a<span style='color:#006e28;'> </span><b><span style='color:#000000;'>&lt;%</span></b><b>if</b>(rows==pages){ <b><span style='color:#000000;'>%&gt;</span></b><span style='color:#006e28;'> href</span>=<span style='color:#0057ae;'>&quot;pj/admin.jsp?n=</span><b><span style='color:#000000;'>&lt;%=</span></b>p + <span style='color:#b08000;'>1</span><b><span style='color:#000000;'>%&gt;</span></b><span style='color:#0057ae;'>&quot;</span><span style='color:#006e28;'> </span><b><span style='color:#000000;'>&lt;%</span></b>} <b><span style='color:#000000;'>%&gt;</span></b>&gt;&amp;gt;&lt;/a&gt;
		&lt;/form&gt;
		<b><span style='color:#000000;'>&lt;%</span></b><b>if</b>(r!=<b>null</b>)r.close();
			}<b>else</b>{
				acc.modifyAccount(request.getParameter(<span style='color:#bf0303;'>&quot;aid&quot;</span>),request.getParameter(<span style='color:#bf0303;'>&quot;pwd&quot;</span>),request.getParameter(<span style='color:#bf0303;'>&quot;anick&quot;</span>),request.getParameter(<span style='color:#bf0303;'>&quot;email&quot;</span>),request.getParameter(<span style='color:#bf0303;'>&quot;birthday&quot;</span>),request.getParameter(<span style='color:#bf0303;'>&quot;comment&quot;</span>),request.getParameter(<span style='color:#bf0303;'>&quot;s1&quot;</span>),request.getParameter(<span style='color:#bf0303;'>&quot;s2&quot;</span>));
				response.sendRedirect(<span style='color:#bf0303;'>&quot;admin.jsp?n=&quot;</span>+(<b><span style='color:#0095ff;'>String</span></b>)request.getSession().getAttribute(<span style='color:#bf0303;'>&quot;n&quot;</span>));
			} <b><span style='color:#000000;'>%&gt;</span></b>
	&lt;/body&gt;
&lt;/html&gt;
<b><span style='color:#000000;'>&lt;%</span></b>
	} <b>else</b>
		response.sendRedirect(<span style='color:#bf0303;'>&quot;user.jsp&quot;</span>);
<b><span style='color:#000000;'>%&gt;</span></b>
</pre>
</body>
</html>
